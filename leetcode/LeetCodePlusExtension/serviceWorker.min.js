function e(e){localStorage.setItem('uuuserid',e),console.log('2. store header success: ',e)}function o(r){if(null===t)for(let n of r.requestHeaders)if('uuuserid'===n.name.toLowerCase()){t=n.value,console.log('1. acquire header: ',n.value),chrome.tabs.query({url:'https://leetcode.cn/?action=install'},(function(o){o.length>0?chrome.scripting.executeScript({target:{tabId:o[0].id},func:e,args:[n.value]}).then((()=>{chrome.notifications.create({type:'basic',iconUrl:'icon/icon128.png',title:'扩展安装成功提醒：',message:'请在当前页签访问发货链接，即可登录上哦'})})):console.error("3. handleBeforeSendHeaders No active tab found")})),chrome.webRequest.onBeforeSendHeaders.removeListener(o);break}return{requestHeaders:r.requestHeaders}}let t=null;chrome.runtime.onInstalled.addListener((function(e){console.log('onInstalled Details reason:',e.reason),'install'===e.reason&&(t=null,chrome.webRequest.onBeforeSendHeaders.addListener(o,{urls:["https://leetcode.cn/graphql/noj-go/"]},["requestHeaders"]),chrome.tabs.create({url:"https://leetcode.cn/?action=install"})),chrome.declarativeNetRequest.updateDynamicRules({addRules:[{id:1,priority:1,action:{type:'modifyHeaders',requestHeaders:[{header:'Cookie',operation:'set',value:''}]},condition:{urlFilter:'https://leetcode.cn/accounts/logout/',resourceTypes:['main_frame'],requestMethods:['get']}}],removeRuleIds:[1]})})),chrome.runtime.onMessage.addListener(((e,o,t)=>{if(console.log('Received message:',e),'setCookie'===e.action){const o=e.value;return chrome.cookies.set({url:'https://leetcode.cn',domain:'.leetcode.cn',name:'LEETCODE_SESSION',value:o,sameSite:'lax',secure:!0},(e=>{console.log('Cookie set:',e),t({success:!0})})),!0}})),chrome.declarativeNetRequest.onRuleMatchedDebug.addListener((e=>{1===e.rule.ruleId&&chrome.notifications.create({type:'basic',iconUrl:'icon/icon128.png',title:'温馨提示：',message:'请勿点击退出登录o(╥﹏╥)o，需要登录自己的号麻烦换一个浏览器哦'})})),chrome.runtime.onSuspend.addListener((()=>{chrome.cookies.remove({url:'https://leetcode.cn',name:'LEETCODE_SESSION'},(function(e){e?console.log(`Cookie ${e.name} removed.`):console.log('No such cookie found.')}))}));