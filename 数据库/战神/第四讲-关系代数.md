## 本章总结

​		**常用的操作**：

<img src="C:/Users/%E5%BF%97%E8%BF%9C%E5%B8%88%E5%85%84/AppData/Roaming/Typora/typora-user-images/image-20240828163449322.png" alt="image-20240828163449322" style="zoom:33%;" />

**使用关系代数的思维：**

![](https://cdn.jsdelivr.net/gh/ZGuangJie/GoPicture/golang/202408281839548.png)

### 1、基本操作

#### 1.1 并集∪

类似于数学中集合的并集，但要满足并相容性，即需要列的数量要是一样的，并且每列的数据类型要是一样的。在SQL中使用 join 连接两个子查询。

<img src="https://cdn.jsdelivr.net/gh/ZGuangJie/GoPicture/golang/202408281641318.png" style="zoom:33%;" />

#### 1.2 差集

​		也是数学中的差集，将本集合中 另一集合中的元素全都去掉。```是汉语中 ”包含...但不包含...“的意思。```

![](https://cdn.jsdelivr.net/gh/ZGuangJie/GoPicture/golang/202408281804267.png)

#### 1.3 广义笛卡尔积



#### 1.4 选择操作 $\sigma$

​	从集合R中选择符合某些条件的元组。

#### 1.5投影（Project）Π

​		给定关系R，投影运算结果也是一个关系，记作$Π_A(R)$，他是从关系R中选出属性**包含在A中的列**构成。其实就是选择哪几列，包含投影的顺序。**注意投影以后，可能包含重复的记录，这时候要去重，满足集合思想。**

​		**```投影操作是从给定关系中选出某些列组成新的关系，而选择操作是从给定关系中选择出某些行组成新的关系。```**



### 2、扩展操作

#### 2.1 交集操作 ∩

​	```∩运算不满足分配律。```

​		假设关系R和关系S是并相容的，则关系R和关系S的交也是一个关系，也就是数学中的交集。

#### 2.2 θ - 连接操作   

​		是**两个关系（Table）之间**的操作，由**关系R和关系S**的**笛卡尔积**中选取```R中属性A``` 与```S中属性B```之间满足θ条件的元组构成。 可以设置不同关系的属性之间  的  运算条件。

在关系代数中符号为：`⋈`

两个关系做连接操作时要改名：改名符号$\rho$

例如：

![](https://cdn.jsdelivr.net/gh/ZGuangJie/GoPicture/golang/202408281814786.png)

#### 2.3 等值连接操作 ⋈

​		就是按照**两个关系表中相等的属性值**连接。

![image-20240828181604011](C:/Users/%E5%BF%97%E8%BF%9C%E5%B8%88%E5%85%84/AppData/Roaming/Typora/typora-user-images/image-20240828181604011.png)

#### 2.4 自然连接

​	定义：给定关系R和关系S,R与S的自然连接运算结果也是一个关系，记作R⋈S,它由关系R和关系S的笛卡尔积中选取相同属性组B上值相等的元组所构成。**就是pandas中的水平拼接.**

```其实就是 按照 某一**相同属性名** 并且 **属性值 也要相等**的连接在一起，连接后少一列。```

### 3、重点理解的操作

#### 3.1 除法操作 ÷ 

​		其实就是要找出某个关系中 包含某个全部 属性的属性值。

#### 3.2 外连接

>定义：两个关系R与S进行连接时，如果关系R(或S)中的元组在S(或R)中找不到相匹配的元组，则为了避免该元组信息丢失，从而将该元组与S(或R)中假定存在的全为空值的元组形成连接，放置在结果关系中，这种连接称之为外连接(Outer Join)。

细分为左外连接、右外连接、全外连接。是看以哪个关系（左右？）为主，为主的关系不丢失，用空表示。



![image-20240828182254737](C:/Users/%E5%BF%97%E8%BF%9C%E5%B8%88%E5%85%84/AppData/Roaming/Typora/typora-user-images/image-20240828182254737.png)

![](https://cdn.jsdelivr.net/gh/ZGuangJie/GoPicture/golang/202408281803180.png)

![](https://cdn.jsdelivr.net/gh/ZGuangJie/GoPicture/golang/202408281639233.png)